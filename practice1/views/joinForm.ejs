<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
</head>
<body>
    <h1><%= title %></h1>
    <form action="/joinForm" method="post" onsubmit="return JOIN_check();" enctype="multipart/form-data">
        <table border="1">
            <tr>
                <th>아이디</th>
                <td><input type="text" name="id" id="id" size="12" maxLength="12"></td>
            </tr>
            <tr>
                <th>비밀번호</th>
                <td><input type="password" name="passwd" id="passwd" size="12" maxlength="12"></td>
            </tr>
            <tr>
                <th>비밀번호확인</th>
                <td><input type="password" name="passwd2" id="passwd2" size="12" maxlength="12"></td>
            </tr>
            <tr>
                <th>이름</th>
                <td><input type="text" name="name" id="name" size="10" maxlength="10"></td>
            </tr>
            <tr>
                <th>주소</th>
                <td><input type="text" name="address" id="address" size="30" maxlength="50"></td>
            </tr>
            <tr>
                <th>주민번호</th>
                <td>
                    <input type="hidden" name="RRN" id="RRN">
                    <input type="text" name="RRN1" id="RRN1" size="6" maxlength="6">
                    -
                    <input type="password" name="RRN2" id="RRN2" size="7" maxlength="7">
                </td>
            </tr>
            <tr>
                <th>이메일주소</th>
                <td>
                    <input type="hidden" name="email" id="email">
                    <input type="text" name="email1" id="email1" size="7" maxlength="12">
                    @
                    <input type="text" name="email2" id="email2" size="9" maxlength="15">
                </td>
            </tr>
            <tr>
                <th>이미지</th>
                <td><input type = "file" name="image" id="image" accept="*"></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" name="submit" value="가입">
                    <button type="button" onclick="location.href='/login'">취소</button>
                </td>
            </tr>
        </table>
    </form>
    <script>
        function JOIN_check()
        {   
            if($("#id").val().trim() == "")
            {
                var message = "id를 입력해 주세요";
                $("#id").val("");
                $("#id").focus();
                alert(message);
                return false;
            }
            if($("#passwd").val().trim() == "")
            {
                var message = "비밀번호를 입력해 주세요";
                $("#passwd").val("");
                $("#passwd").focus();
                alert(message);
                return false;
            }
            if($("#passwd2").val() != $("#passwd").val())
            {
                var message = "비밀번호가 일치하지 않습니다";
                $("#passwd2").val("");
                $("#passwd2").focus();
                alert(message);
                return false;
            }
            if($("#name").val().trim() == "")
            {
                var message = "이름을 입력해 주세요";
                $("#name").val("");
                $("#name").focus();
                alert(message);
                return false;
            }
            if($("#address").val().trim() == "")
            {
                var message = "주소를 입력해 주세요";
                $("#address").val("");
                $("#address").focus();
                alert(message);
                return false;
            }
            if($("#email1").val().trim() == "")
            {
                var message = "이메일 앞자리를 입력해 주세요";
                $("#email1").val("");
                $("#email1").focus();
                alert(message);
                return false;
            }
            if($("#email2").val().trim() == "")
            {
                var message = "이메일 뒷자리를 입력해 주세요";
                $("#email2").val("");
                $("#email2").focus();
                alert(message);
                return false;
            }
            var email= $("#email1").val() +'@'+ $("#email2").val();
            $("#email").val(email);

            if($("#RRN1").val().trim() == "")
            {
                var message = "주민번호 앞자리를 입력해 주세요";
                $("#RRN1").val("");
                $("#RRN1").focus();
                alert(message);
                return false;
            }
            if($("#RRN2").val().trim() == "")
            {
                var message = "주민번호 뒷자리를 입력해 주세요";
                $("#RRN2").val("");
                $("#RRN2").focus();
                alert(message);
                return false;
            }
            var RRN= $("#RRN1").val() +'-'+ $("#RRN2").val();
            $("#RRN").val(RRN);
            return true;
        }
    </script>
</body>
</html>